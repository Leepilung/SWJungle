# gcc

- 기초적인 사용법

```
gcc 파일명.c
```

이렇게 하면 파일명.c 파일을 결과물로 a.out이라는 바이너리 실행파일로 바꿔버린다.

이 해당 파일을 실행하려면 ./a.out 이라고 입력하면 된다.

실행 파일의 이름을 정해주고 싶을 떈 -o 옵션을 사용하면 된다.

```c
gcc -o main main.c
```

이렇게 하면 a.out이 아니라 main이란 이름으로 파일이 생성된다.

컴팡리 과정은 c파일에서 바로 바이너리로 가는 것이 아니라, 먼저 object 파일로 변환하고 링크라는 과정을 통해 최종적으로 실행가능한 컴파일 과정을 거친다.

c파일 하나만 컴파일하는 경우엔 별로 중요치 않지만, 여러 파일을 한꺼번에 링크할 경우 필요한 옵션이다.

```c
gcc -c -o main.o main.c
gcc -c -o array.o array.c
```

이렇게하면 위예제엇 적어둔대로 main.c와 array.c파일을 main.o 와 array.o파일로 변환이 가능하다.

아롷개 -o 옵션으로 출력된 오브젝트 파일을 링킹할 땐 크게 다르지 않다.

```c
gcc -o main main.o array.o
```

만일 오브젝트 파일을 만들어주는 과정이 번거롭다면 c파일에서 링킹에서 컴파일까지 진행할 수 있다.

```c
gcc -o main main.c array.c
```

위의 경우엔 .o 파일을 남기지 않는다.

컴파일할 때 보통 #inlcude <math.h> 같은 인클루드문을 맨 위에 적지만, gcc에서 컴파일할 땐 사용하고자 하는 라이브러리를 옵션에 명시하는 것이 좋다.

-l(소문자 L) 옵션을 사용하며, 띄어쓰기 없이 옵션 뒤에 바로 라이브러리 이름을 적습니다.

```c
gcc -o main main.c -lm
```

-lm은 math.h를 참조하겠다는 의미다. 이 외에도 -lpthread 같은 옵션이 가능하다.

주의할 점은, 어째서인진 몰라도 -lm의 위치는 가장 뒤에 있는 게 좋다는 것이다. 분명히 같은 옵션인데 -lm을 앞에 넣으면 컴파일이 안되는 현상이 있다.

이하는 자주 사용할만한 parameter 모음입이다.

```c
gcc -v -I/usr/local/include -DDEBUG -Wall -W -O2 -L/usr/local/lib -o like like.c -lm
```

- v : 컴파일 과정을 화면에 출력한다.

- o : 출력 파일 이름 설정한다.

- I : 대문자 i입니다. header 파일의 위치를 설정한다

- D : 코드 내부 define입니다. 맨 위에 #define을 추가하는 것과 같다.

- Wall : Warning all입니다. 컴파일은 진행되지만, gcc가 알려주는 warning들을 보여준다.

- W : Wall 옵션으로 미처 표시되지 않던 나머지 warning도 함께 보여준다.

- On : 최적화 옵션. -O3, -Os 같은 식으로 사용한다.

- lm : math libarary 사용하는 옵션이다.

- L : library 폴더의 위치를 지정한다.

- c : \*.o 파일을 생성하는 옵션이다.
